<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>appletFactory</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="Gnocl"
HREF="index.html"><LINK
REL="UP"
TITLE="Gnome"
HREF="x351.html#AEN10419"><LINK
REL="PREVIOUS"
TITLE="Commands"
HREF="x351.html"><LINK
REL="NEXT"
TITLE="session"
HREF="r10639.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Gnocl</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x351.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="r10639.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="APPLETFACTORY"
></A
>appletFactory</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN10425"
></A
><H2
>Name</H2
>appletFactory&nbsp;--&nbsp;A command which creates a Gnome panel applet.</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN10428"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>appletFactory</B
>   <TT
CLASS="REPLACEABLE"
><I
>iid</I
></TT
>   <TT
CLASS="REPLACEABLE"
><I
>command</I
></TT
> </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN10435"
></A
><H2
>Screenshot</H2
><P
><IMG
SRC="../pics/appletFactory.png"></P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN10439"
></A
><H2
>Options</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>-background</DT
><DD
><P
>type: <A
HREF="x165.html#COLOR"
><SPAN
CLASS="TYPE"
>color</SPAN
></A
>
            </P
><P
>Background color of the widget.</P
></DD
><DT
>-child</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>widget-ID</SPAN
>
            </P
><P
>Widget ID of the child.</P
></DD
><DT
>-dragTargets</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>list of strings</SPAN
>
            </P
><P
>List of source targets
(e.g. text/plain or application/x-color)
which are supported.</P
></DD
><DT
>-dropTargets</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>list of strings</SPAN
>
            </P
><P
>List of destination targets
(e.g. text/plain or application/x-color)
which are supported.</P
></DD
><DT
>-name</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
>
            </P
><P
>Name of the widget, can be used to set options in an rc file.</P
></DD
><DT
>-onButtonPress</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed if a mouse button is press
inside the widget.
Before evaluation the
following percent strings are substituated:
TABLE
%% | %
%w | widget name
%t | type of event: one of buttonPress, button2Press or button3Press
%x | x coordinate
%y | y coordinate
%b | button number
%s | state of the buttons and modifiers (bitmask)
TABLE</P
></DD
><DT
>-onButtonRelease</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed if a mouse button is released
inside the widget.
Before evaluation the
following percent strings are substituated:
TABLE
%% | %
%w | widget name
%t | type of event: always buttonRelease
%x | x coordinate
%y | y coordinate
%b | button number
%s | state of the buttons and modifiers (bitmask)
TABLE</P
></DD
><DT
>-onChangeOrientation</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Command to be executed in the global scope if the panel including
the applet changes its orientation.
Before evaluation the
following percent strings are substituted:
TABLE
%% | %
%w | widget name.
TABLE</P
></DD
><DT
>-onChangeSize</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Command to be executed in the global scope if the panel including
the applet changes its size.
Before evaluation the
following percent strings are substituted:
TABLE
%% | %
%w | widget name.
TABLE</P
></DD
><DT
>-onDestroy</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed if the widget is destroyed.
Before evaluation the
following percent strings are substituated:
TABLE
%% | %
%w | widget name.
TABLE</P
></DD
><DT
>-onDragData</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed if data is draged from
this the widget to another. This command must return
the data to be draged.
Before evaluation the
following percent strings are substituated:
TABLE
%% | %
%w | widget name
%t | time
%T | type of data
TABLE</P
></DD
><DT
>-onDropData</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed if data is dropped on the widget.
Before evaluation the
following percent strings are substituated:
TABLE
%% | %
%w | widget name
%d | data
%l | length of data
%t | time
%T | type of data
%x | x coordinate
%y | y coordinate
TABLE</P
></DD
><DT
>-onMotion</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed if the mouse is moved inside
the widget.
Before evaluation the
following percent strings are substituated:
TABLE
%% | %
%w | widget name
%x | x coordinate
%y | y coordinate
%s | state of the buttons and modifiers (bitmask)
TABLE</P
></DD
><DT
>-onPopupMenu</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed if the "popup-menu" signal
is recieved, which is normally the case if the user presses
Shift-F10.
Before evaluation the
following percent strings are substituated:
%w by widget name.</P
></DD
><DT
>-onRealize</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command whih is executed in the global scope if
the widget has been realized.
Before evaluation the following percent strings are
substituated:
TABLE
%% | %
%w | widget name.
TABLE</P
></DD
><DT
>-onShowHelp</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
            </P
><P
>Tcl command which is executed in the global scope
if the "show-help" signal
is recieved, which is normally the case if the user presses
F1 or Ctrl-F1.
Before evaluation the following percent strings are
substituated
TABLE
%% | %
%w | widget name
%h | help type: either "whatsThis" or "tooltip"
TABLE</P
></DD
><DT
>-sensitive</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>boolean</SPAN
> (default: 1)
            </P
><P
>Whether or not the item is sensitve to user input.</P
></DD
><DT
>-tooltip</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
>
            </P
><P
>Message that appear next to this widget when the mouse
pointer is held over it for a short amount of time.</P
></DD
><DT
>-visible</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>boolean</SPAN
> (default: 1)
            </P
><P
>Whether or not the item is visible.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN10557"
></A
><H2
>Description</H2
><P
>The appletFactory creates a Gnome panel applet. An additional
matching Bonobo Activation server file is needed. The appletFactory
command has two parameters. iid is the ID which must correspond to
the oaf_server iid entry in the server file. command is executed
when gnome creates the applet.
The following percent strings are substituted:
TABLE
%% | %
%i | iid
%w | name of the newly created applet
/TABLE
The above widget commands and options are applicable to this newly
created applet.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN10560"
></A
><H2
>Commands</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><P
><B
CLASS="COMMAND"
><TT
CLASS="REPLACEABLE"
><I
>id</I
></TT
></B
>   addMenuItem  [<TT
CLASS="REPLACEABLE"
><I
>-option</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>...]</P
></DT
><DD
><P
>Adds an entry to the panel menu.</P
><P
></P
><DIV
CLASS="VARIABLELIST"
><P
><B
>Options</B
></P
><DL
><DT
>-text</DT
><DD
><P
>type: <A
HREF="x165.html#PERCENTSTRING"
><SPAN
CLASS="TYPE"
>percent-string</SPAN
></A
> (default: "")
                  </P
><P
>Text or stock item of the entry.</P
></DD
><DT
>-onClicked</DT
><DD
><P
>type: <SPAN
CLASS="TYPE"
>string</SPAN
> (default: "")
                  </P
><P
>Command to be executed in the global scope if
entry is chosen.
Before evaluation the following percent strings
are substituted:
TABLE
%% | %
/TABLE</P
></DD
></DL
></DIV
></DD
><DT
><P
><B
CLASS="COMMAND"
><TT
CLASS="REPLACEABLE"
><I
>id</I
></TT
></B
>   addMenuSeparator </P
></DT
><DD
><P
>Adds a separator to the panel menu.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
><TT
CLASS="REPLACEABLE"
><I
>id</I
></TT
></B
>   getSize </P
></DT
><DD
><P
>Returns the size of the applet in pixel.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
><TT
CLASS="REPLACEABLE"
><I
>id</I
></TT
></B
>   getOrientation </P
></DT
><DD
><P
>Returns the orientation of the panel as one of
up, down, left or right. The orientation is not the
same as the side on the screen the panel is on.
If the panel is for
example on the right side of the screen, the orientation
is left.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
><TT
CLASS="REPLACEABLE"
><I
>id</I
></TT
></B
>   configure  [<TT
CLASS="REPLACEABLE"
><I
>-option</I
></TT
> <TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>...]</P
></DT
><DD
><P
> Configures the widget. Option may have any of
the values accepted on creation of the widget.</P
></DD
><DT
><P
><B
CLASS="COMMAND"
><TT
CLASS="REPLACEABLE"
><I
>id</I
></TT
></B
>   delete </P
></DT
><DD
><P
> Deletes the widget and the associated tcl command.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN10632"
></A
><H2
>Example</H2
><P
><PRE
CLASS="PROGRAMLISTING"
>namespace eval gnocl {
   set appName "gnocl_test_applet"
}
package require gnoclGnome
proc makeMenu { w } {
   $w addMenuItem -text "%#About" -onClicked {gnocl::dialog -text "About"}
}
proc createApplet {w iid} {
   set box [gnocl::box -orientation vertical]
   $box add [gnocl::button -text "Hello, world!" -onClicked "puts onClicked"]
   $w configure -child $box -onRealize "makeMenu %w"
}
gnocl::appletFactory OAFIID:gnocl_test_applet_factory {createApplet %w %i}</PRE
></P
><P
>results in</P
><P
><IMG
SRC="../pics/appletFactory.png"></P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x351.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="r10639.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Commands</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="x351.html#AEN10419"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>session</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>